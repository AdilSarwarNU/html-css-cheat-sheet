<!DOCTYPE html>
<html>

<head>
    <title>HTML5 and CSS cheat sheet</title>
    <link href="style.css" type="text/css" rel="stylesheet">
    <link href="https://fonts.googleapis.com/css?family=Source+Code+Pro" rel="stylesheet">
    <link href="https://fonts.googleapis.com/css?family=Source+Sans+Pro:300,400,700" rel="stylesheet">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta charset="utf-8">
</head>

<!-- div.section>h2+div.snippet>h2+div.codeblock>div.ex+code -->

<body>
    <script src="https://unpkg.com/most/dist/most.js"></script>
    <script>
        window.addEventListener("load", () => {
            const { fromEvent, combine } = most;
            let matrixInput = document.getElementById("matrix-1");
            let out1 = document.getElementById("out-1");
            let xInput = document.getElementById("x");
            let yInput = document.getElementById("y");
            let out2 = document.getElementById("out-2");

            function toNumber(event) {
                console.log(event.target.value);
                return Number(event.target.value)
            }

            function validMatrix(m) {
                return m.length === 6 && m.filter(elem => typeof (elem) !== "number").length === 0;
            }
            function applyTransform(p, m) {
                var xt = p[0] * m[0] + p[1] * m[2] + m[4];
                var yt = p[0] * m[1] + p[1] * m[3] + m[5];
                return [xt, yt];
            }

            console.dir(matrixInput);
            console.dir(out1);
            console.dir(out2);
            console.dir(xInput);
            console.dir(yInput);

            const matrix$ = fromEvent("input", matrixInput).map((event) =>
                String(event.target.value).split(" ").filter(x => x !== "").map(Number)
            );
            const x$ = fromEvent("input", xInput).map(toNumber);
            const y$ = fromEvent("input", yInput).map(toNumber);
            const point$ = combine((a, b) => { const p = [a, b]; console.log(p); return p; }, x$, y$);
            const out1$ = matrix$.map(m => applyTransform([0, 0], m));
            const out2$ = combine(applyTransform, point$, matrix$);

            out1$.map(p => p.join(" ")).observe(p => out1.textContent = p);
            out2$.map(p => p.join(" ")).observe(p => out2.textContent = p);
        });
    </script>

    <nav>
        <ul class="left">
            <li>
                <a href="html-css-cheat-sheet.html#html">HTML</a>
            </li>
            <li>
                <a href="html-css-cheat-sheet.html#css">CSS</a>
            </li>
            <li>
                <a href="animation.html#animation">Animation</a>
            </li>
            <li>
                <a href="tools.html">Tools</a>
            </li>
        </ul>
        <ul class="right">
            <li>
                <a href="https://github.com/acchou/html-css-cheat-sheet" target="_blank" rel="noopener noreferrer">
                    <img class="social-logo" src="github.svg">
                </a>
            </li>
        </ul>
    </nav>


    <section id="html">
        <h1>Tools</h1>
        <section id="html-templates">
            <h2>Transforms</h2>
            <div class="snippet span-7">
                <h2>Matrix transforms</h2>
                <div class="matrix">
                    <div class="codeblock">
                        matrix(
                        <input id="matrix-1" type="text">)
                    </div>
                    <div class="codeblock">
                        (0 0) =>
                        <label id="out-1" data-x="0" data-y="0" />
                    </div>
                    <div class="codeblock">
                        (
                        <input placeholder="x" id="x" size="5" type="text">
                        <input placeholder="y" id="y" size="5" type="text">) =>
                        <label id="out-2" />
                    </div>
                </div>
            </div>
            </div>
        </section>
    </section>
</body>

</html>